{"ast":null,"code":"var _jsxFileName = \"/Users/novelistchan/Documents/koj/Form-Antd-Test/src/components/form/components/fields/ArrayTableField.js\";\nimport React from 'react';\nimport utils from '../utils';\nimport Package from '../Package';\nimport { Table, Input, Button, Popconfirm, Form } from 'antd';\n\nclass ArrayTableField extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleAdd = () => {\n      let formData = this.props.formData;\n      formData.push(this.props.schema.default || utils.default(\"arrayTable\"));\n      this.props.onChange(formData);\n    };\n\n    this.handleDel = index => {\n      let formData = this.props.formData;\n      formData.splice(index);\n      this.props.onChange(formData);\n    };\n\n    this.columnsParser = columns => {\n      let basic = Object.keys(columns).map(column => ({\n        dataIndex: column,\n        title: columns[column].title,\n        width: columns[column].width || 200,\n        render: (d, _, index) => React.createElement(Package, {\n          global: global,\n          schema: columns[column].content,\n          formData: this.props.formData[index][column],\n          onChange: data => {\n            let formData = this.props.formData;\n            formData[index][column] = data;\n            this.props.onChange(formData);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        })\n      }));\n      basic.unshift({\n        title: \"序号\",\n        width: 100,\n        fixed: 'left',\n        render: (_, record, index) => React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, index))\n      });\n      basic.push({\n        title: \"选项\",\n        width: 100,\n        fixed: 'right',\n        render: (_, record, index) => React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: _ => this.handleDel(index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, \"Delete\"))\n      });\n      return basic;\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          schema = _this$props.schema,\n          formData = _this$props.formData;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.handleAdd,\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13\n      },\n      __self: this\n    }, \"Add\"), React.createElement(Table, {\n      columns: this.columnsParser(schema.columns),\n      dataSource: formData || schema.default || utils.default(\"arrayTable\"),\n      scroll: {\n        x: 1500,\n        y: 300\n      },\n      rowKey: schema.key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ArrayTableField;","map":{"version":3,"sources":["/Users/novelistchan/Documents/koj/Form-Antd-Test/src/components/form/components/fields/ArrayTableField.js"],"names":["React","utils","Package","Table","Input","Button","Popconfirm","Form","ArrayTableField","Component","handleAdd","formData","props","push","schema","default","onChange","handleDel","index","splice","columnsParser","columns","basic","Object","keys","map","column","dataIndex","title","width","render","d","_","global","content","data","unshift","fixed","record","x","y","key"],"mappings":"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","sourcesContent":["import React from 'react'\nimport utils from '../utils'\nimport Package from '../Package'\nimport { Table, Input, Button, Popconfirm, Form } from 'antd'\n\nclass ArrayTableField extends React.Component {\n  render() {\n\n    const { schema, formData } = this.props\n\n    return (\n      <div>\n        <Button onClick={this.handleAdd} type=\"primary\">Add</Button>\n        <Table columns={this.columnsParser(schema.columns)} \n        dataSource={formData || schema.default || utils.default(\"arrayTable\")}\n        scroll = {{x:1500, y:300}} \n        rowKey = {schema.key}\n        />\n      </div>\n    )\n  }\n\n  handleAdd = () => {\n    let formData = this.props.formData\n    formData.push(this.props.schema.default || utils.default(\"arrayTable\"))\n    this.props.onChange(formData)\n  }\n\n  handleDel = index => {\n    let formData = this.props.formData\n    formData.splice(index)\n    this.props.onChange(formData)\n  }\n\n\n  columnsParser = columns => {\n    let basic = Object.keys(columns).map(column => ({\n      dataIndex: column,\n      title: columns[column].title,\n      width:  columns[column].width || 200,\n      render: (d, _, index) => (\n        <Package\n          global={global}\n          schema={columns[column].content}\n          formData={this.props.formData[index][column]}\n          onChange={data => {\n            let formData = this.props.formData\n            formData[index][column] = data\n            this.props.onChange(formData)\n          }} />)\n    }))\n    basic.unshift({\n      title: \"序号\",\n      width: 100,\n      fixed: 'left',\n      render: (_, record, index) => (\n        <div>\n          <span>{index}</span>\n        </div>\n      )\n    })\n    basic.push({\n      title: \"选项\",\n      width: 100,\n      fixed: 'right',\n      render: (_, record, index) => (\n        <div>\n          <Button onClick={_ => this.handleDel(index)}>Delete</Button>\n          {/* <span>{index}</span> */}\n        </div>\n      )\n    })\n    return basic\n  }\n\n}\n\n\n\nexport default ArrayTableField"]},"metadata":{},"sourceType":"module"}